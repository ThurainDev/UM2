<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UM2 Connect - Christmas Invitation</title>
    <!-- Load Google Fonts: Montserrat (for titles) and Roboto (for body) --><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Christmas Theme, Minimalist Aesthetic and Custom Fonts --><style>
        /* Define Font Variables */
        :root {
            --font-heading: 'Montserrat', sans-serif;
            --font-body: 'Roboto', sans-serif;
            /* Christmas Palette */
            --color-primary-green: #15803d; /* deep green */
            --color-secondary-red: #dc2626; /* bright red */
            --color-background-ivory: #fff7ed; /* warm ivory/amber-50 */
        }

        /* Apply Body Font and Christmas Background */
        body { 
            font-family: var(--font-body); 
            background-color: var(--color-background-ivory); 
            color: #000000; 
            min-height: 100vh; /* Shorter content now */
            scroll-behavior: smooth; 
        }

        /* Apply Heading Font explicitly to all H1 and H2 elements */
        h1, h2 {
            font-family: var(--font-heading); 
        }

        /* Animation Classes */
        .fade-in-up {
            opacity: 0; 
            transform: translateY(2rem);
            transition: opacity 1s ease-out, transform 1s ease-out;
        }
        .in-view {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Custom scroll down indicator bounce */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        .bounce-animation {
            animation: bounce 2s infinite;
        }

        /* Custom aspect ratio for A2 poster */
        .aspect-a2 {
            padding-bottom: 141.42%; /* A2 ratio is 1:1.4142 or 100:141.42 */
            position: relative;
            height: 0;
            overflow: hidden;
        }
        .aspect-a2 img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* or 'cover' depending on how you want it to fill */
        }
    </style>
    
    <script>
        // CRITICAL: The endpoint URL pointing to your deployed Google Apps Script Web App.
        const SHEET_ENDPOINT = "https://script.google.com/macros/s/AKfycbw8OcFvg7s1FpNjUqPwPaGxcle_tUVCVVaf5p5_Kb3secqPP_bmOqSu5s3DpoJrNWfSQg/exec";
        
        /**
         * Logs the button click result by calling the Google Apps Script endpoint via GET (no-cors).
         */
        async function logClick(result) {
            const statusEl = document.getElementById('status-message');
            const buttonContainer = document.getElementById('button-container');
            
            if (result !== 'YES') {
                statusEl.textContent = "Thank you for considering. We hope to see you next time.";
                return;
            }

            // Disable buttons during submission
            buttonContainer.querySelectorAll('button').forEach(btn => btn.disabled = true);
            statusEl.textContent = `Submitting response...`;

            try {
                // Using fetch with no-cors to bypass security checks, relying on server-side CORS fix.
                await fetch(SHEET_ENDPOINT, { 
                    method: 'GET', // Use GET as configured in Code.gs
                    mode: 'no-cors' 
                }); 
                
                // The network request was sent successfully.
                // Updated confirmation message with user's requested text
                statusEl.textContent = `âœ… YES! We can't wait to share this space with you. Your presence is the biggest blessing. We'll see you there!`;
                
            } catch (e) {
                // This usually only catches catastrophic network failures.
                statusEl.textContent = `âŒ Error: Failed to send RSVP. Check console for network details.`;
                console.error("error during fetch:", e);
            } finally {
                // Re-enable buttons if submission failed, or keep disabled if successful
                if (!statusEl.textContent.includes('âœ…')) {
                     buttonContainer.querySelectorAll('button').forEach(btn => btn.disabled = false);
                }
            }
        }

        // --- Intersection Observer for Scroll Animation ---
        document.addEventListener('DOMContentLoaded', () => {
            // Target all elements that need to animate
            const animatableElements = document.querySelectorAll('.fade-in-up'); 

            // Set up the observer
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Element is in view, apply the animation class
                        entry.target.classList.add('in-view'); 
                        // Stop observing once the animation is triggered
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                rootMargin: '0px',
                threshold: 0.1 // Trigger when 10% of the element is visible
            });

            // Start observing all animatable elements
            animatableElements.forEach(el => {
                observer.observe(el);
            });
        });
    </script>
</head>

<body>

    <!-- 1. HERO SECTION: Full Width, Center Aligned, Christmas Theme --><header id="hero" class="w-full min-h-screen flex flex-col justify-center items-center text-center p-6 bg-amber-50 text-black">
        <div class="space-y-4 sm:space-y-6">
            <!-- Subtitle --><p class="text-base sm:text-lg font-bold tracking-wide text-red-600 fade-in-up">The Growing Blessings</p>
            
            <!-- Main Title (Colored Green) --><h1 class="text-6xl sm:text-8xl md:text-9xl font-normal leading-tight tracking-tight text-green-800 fade-in-up">
                UM2<br>CONNECT
            </h1>
            
            <!-- Tagline (Red Text) --><p class="text-sm sm:text-base font-normal max-w-xs mx-auto pt-4 text-red-600 fade-in-up">
                Join us for a time of joy, connection, and festive blessings!
            </p>
        </div>
        
        <!-- Scroll Down Indicator --><a href="#action-section" class="absolute bottom-10 flex flex-col items-center cursor-pointer hover:text-green-700 transition duration-150">
            <p class="text-base tracking-widest text-green-800 mb-2">RSVP Now</p>
            <svg class="w-6 h-6 text-green-800 bounce-animation" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
        </a>
    </header>

    <!-- 2. ACTION SECTION: Final Decision, Poster, and Buttons --><section id="action-section" class="py-20 bg-white w-full border-t border-red-300">
        <div class="max-w-3xl mx-auto px-6 text-center">

            
            <!-- MODIFIED: Invitation Card/Message --><div class="mb-10 p-8 bg-white rounded-3xl shadow-2xl fade-in-up border border-gray-100">
                <!-- Decorative Header --><div class="mb-6 pb-4 border-b border-red-200">
                    <span class="text-4xl text-green-700 leading-none">ðŸŽ„</span>
                    <h3 class="text-3xl font-extrabold text-red-600 mt-2">UM2 Christmas Connect</h3>
                </div>

                <p class="text-lg text-gray-800 mb-6 leading-relaxed text-left">
                    Dear UM2 students, the festive season is upon us, and we warmly invite you to join us for our annual Christmas event! 
                    This is a special time dedicated to coming together to share love, joy, and the true meaning of Christmas.
                    We have planned an event of festive cheer and community spirit, perfect for unwinding before the year ends.
                </p>
            </div>

            <!-- MOVED: A2 Size Poster Placeholder - Now a separate element --><div class="max-w-md w-full mx-auto mb-10 overflow-hidden rounded-lg shadow-xl aspect-a2 fade-in-up">
                <img src="/img/poster2.png" alt="Christmas Event Poster" class="w-full h-full object-contain">
            </div>
            
            <!-- Original Invitation Poster Placeholder (1:1 Aspect Ratio) --><div class="max-w-sm w-full mx-auto mb-10 overflow-hidden rounded-xl shadow-2xl aspect-square fade-in-up">
                <img src="/img/UM2.png" alt="Christmas Invitation Poster" class="w-full h-full object-cover">
            </div>

            <!-- Status Message (Christmas Green Theme) --><div class="bg-green-100 border-l-4 border-green-600 p-4 mb-8 rounded-lg shadow-md fade-in-up">
                <p id="status-message" class="mt-1 text-green-800 font-semibold">
                    Are you ready for some Christmas joy? Let us know if you can join us
                </p>
            </div>

            <!-- Button Section (Christmas Colors) --><div id="button-container" class="grid grid-cols-2 gap-6 max-w-sm mx-auto fade-in-up">
                <button id="btn-yes" onclick="logClick('YES')" 
                        class="w-full py-4 text-white font-bold text-xl rounded-lg shadow-lg 
                               bg-green-700 hover:bg-green-600 transition duration-300 transform hover:scale-[1.05] 
                               focus:outline-none focus:ring-4 focus:ring-green-700 focus:ring-opacity-70 uppercase tracking-wider">
                    YES, I will join
                </button>

                <button id="btn-no" onclick="logClick('NO')" 
                        class="w-full py-4 font-bold text-xl rounded-lg border-2 border-green-700 shadow-lg 
                               text-green-700 bg-white hover:bg-green-50 transition duration-300 transform hover:scale-[1.05] 
                               focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50 uppercase tracking-wider">
                    NO
                </button>
            </div>
        </div>
    </section>

</body>
</html>